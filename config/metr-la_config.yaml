# ğŸ”§ ä¿®æ­£åçš„é…ç½®æ–‡ä»¶
data:
  datapath: "/root/ggg/DATA/data"
  train_cities: ["chengdu", "pems-bay", "shenzhen"] 
  target_city: "metr-la"
  seq_len: 12
  horizons: [3, 6, 12]  # æ¢å¤å¤šhorizon
  steps_per_day: 288
  adaptation_days: 3
  
model:
  n_layer: 6              # ä¿æŒåŸå§‹æˆåŠŸé…ç½®
  n_head: 4               
  n_embd: 64              # ä¿æŒåŸå§‹ç»´åº¦
  dropout: 0.1            
  bias: false
  n_linear: 1
  
  input_dim: 2            # ğŸ”§ å…³é”®ä¿®æ­£ï¼šæ¢å¤ä¸º2
  tod_embedding_dim: 8    
  dow_embedding_dim: 4    
  spatial_embedding_dim: 8    # æ¢å¤åŸå§‹é…ç½®
  adaptive_embedding_dim: 8   # æ¢å¤åŸå§‹é…ç½®
  output_dim: 1
  
  temporal_layers: 2      # æ¢å¤åŸå§‹é…ç½®
  spatial_layers: 2
  
  blocksize: 8            
  blocknum: 4            
  factors: 1

optimization:
  meta_lr: 0.00005        # ä¿æŒåŸå§‹å­¦ä¹ ç‡
  update_lr: 0.001
  meta_epochs: 5
  city_epochs: 1
  test_epochs: 50
  batch_size: 32
  grad_clip: 1.0          
  weight_decay: 0.001
  
  # ğŸ”§ ä¿å®ˆçš„æ•ˆç‡ä¼˜åŒ–
  use_lora: true
  lora_rank: 32           # å¢å¤§rankï¼Œé¿å…è¿‡åº¦å‹ç¼©
  use_flash_attn: false   # æš‚æ—¶å…³é—­ï¼Œé¿å…æ•°å€¼é—®é¢˜
  gradient_checkpointing: false
  mixed_precision: true  # å…³é—­æ··åˆç²¾åº¦ï¼Œç¡®ä¿ç¨³å®šæ€§
  dtype: "float32"

training:
  seed: 42
  cuda: "2"
  eval_interval: 2
  eval_only: false
  enable_significance_test: true
  num_test_runs: 5
  domain_specific_params: ["value_mlp", "value_transform"]

output:
  out_dir: "out/improved_main"
  log_dir: "logs"
  save_best: true
  save_last: true